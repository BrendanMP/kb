function shuffle(e){for(var o,r,s=e.length;s;)r=Math.floor(Math.random()*s--),o=e[s],e[s]=e[r],e[r]=o;return e}function watchKeys(){$("body").keypress(function(e){if(event.getModifierState("CapsLock")===!0)$("#console").text("CAPS LOCK ON, GAME PAUSED");else{if(32==e.keyCode)return e.preventDefault(),!1;doBattle(e)}})}function updateScores(){$("#js-p1-score").text(player.one.score),$("#js-p2-score").text(player.two.score)}function addWords(){shuffle(words),player.one.word=words[0].split(""),player.two.word=words[1].split(""),playedWords.push(words[0],words[1]),displayWords()}function displayWords(){for(var e=0;e<wordLength;e++)player.one.displayWord[e]='<span id="p1-r'+roundCounter+"-c"+(e+1)+'">'+player.one.word[e]+"</span>",player.two.displayWord[e]='<span id="p2-r'+roundCounter+"-c"+(e+1)+'">'+player.two.word[e]+"</span>";$("#js-p1-wordlist").prepend("<li><h2>"+player.one.displayWord.join("")+"</h2></li>"),$("#js-p2-wordlist").prepend("<li><h2>"+player.two.displayWord.join("")+"</h2></li>"),$("h2 span:first-of-type").addClass("active")}function doBattle(e){e.key===player.one.word[0]&&e.key===player.two.word[0]?player.one.progress===player.two.progress?(player.one.progress=player.one.progress+1,player.two.progress=player.two.progress+1,player.one.word.shift(),player.two.word.shift(),$("#p1-r"+roundCounter+"-c"+player.one.progress).addClass("input").removeClass("active").next().addClass("active"),$("#p2-r"+roundCounter+"-c"+player.two.progress).addClass("input").removeClass("active").next().addClass("active"),console.log("P1 & P2 - Matched (Both Advance)",player.one.word,player.two.word)):player.one.progress<player.two.progress?(player.one.progress=player.one.progress+1,player.one.word.shift(),$("#p1-r"+roundCounter+"-c"+player.one.progress).addClass("input").removeClass("active").next().addClass("active"),console.log("P1 & P2 - Matched (Player 1 Advances)",player.one.word,player.two.word)):player.two.progress<player.one.progress&&(player.two.progress=player.two.progress+1,player.two.word.shift(),$("#p2-r"+roundCounter+"-c"+player.two.progress).addClass("input").removeClass("active").next().addClass("active"),console.log("P1 & P2 - Matched (Player 2 Advances)",player.two.word,player.two.word)):e.key===player.one.word[0]?(player.one.progress=player.one.progress+1,player.one.word.shift(),$("#p1-r"+roundCounter+"-c"+player.one.progress).addClass("input").removeClass("active").next().addClass("active"),console.log("P1 - Matched",player.one.word)):e.key===player.two.word[0]&&(player.two.progress=player.two.progress+1,player.two.word.shift(),$("#p2-r"+roundCounter+"-c"+player.two.progress).addClass("input").removeClass("active").next().addClass("active"),console.log("P2 - Matched",player.two.word)),roundWinner()}function roundWinner(){0===player.one.word.length&&0===player.two.word.length?(player.one.score=player.one.score+1,player.two.score=player.two.score+1,$("#console").text("Players Tie Round "+roundCounter),startRound()):0===player.one.word.length?(player.one.score=player.one.score+1,$("#console").text("Player One Wins Round "+roundCounter),startRound()):0===player.two.word.length&&(player.two.score=player.two.score+1,$("#console").text("Player Two Wins Round "+roundCounter),startRound()),updateScores()}function startRound(){player.one.progress=0,player.two.progress=0,roundCounter++,words.length>0?(addWords(),watchKeys(),words.splice(0,2)):0===words.length&&gameOver()}function gameOver(){player.one.score>player.two.score?(console.log("P1 Wins Game"),$("#console").text("Player One Wins the Game - P1: "+player.one.score+" P2: "+player.two.score)):player.one.score<player.two.score&&(console.log("P2 Wins Game"),$("#console").text("Player Two Wins the Game - P1: "+player.one.score+" P2: "+player.two.score)),words=playedWords,playedWords=[],roundCounter=0,startGame()}function startGame(){player.one.score=0,player.two.score=0,updateScores(),$("#js-p1-wordlist").html(""),$("#js-p2-wordlist").html(""),startRound()}function newGame(){$("#console").text("Welcome to ShiftLock"),words.concat(playedWords),startGame()}var words=["DoxIckEys","PsEghTinG","MoQnuQeck","PonCiCleS","BamAnaPAn","GroinDoGs","LorfiCKle","SmoAMcake","LiMGisTIc","MOsTamOng","DreAMduMP","MiltMirKs","DanGmurSe","MoMinGleS"],wordLength=words[0].length,wordTotal=words.length,playedWords=[],roundCounter=0,player={one:{word:[],displayWord:[],progress:0,score:0},two:{word:[],displayWord:[],progress:0,score:0}};$("#js-new-game").click(newGame),$(document).ready(function(){startGame()});